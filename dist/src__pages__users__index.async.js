"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[344,181],{61796:function(N,h,e){e.r(h),e.d(h,{roles:function(){return m}});var b=e(97857),o=e.n(b),g=e(5574),O=e.n(g),A=e(67294),u=e(65520),c=e(45360),I=e(5914),M=e(69677),f=e(34041),n=e(85893),j={labelCol:{span:4},wrapperCol:{span:20}},m=["undefined","\u7BA1\u7406\u5458","\u4E13\u5C5E\u7528\u6237","\u5185\u90E8\u7528\u6237"],P=function(E){var H=u.Z.useForm(),S=O()(H,1),v=S[0],B=E.visible,i=E.record,K=E.closeHandler,T=E.onFinish,F=E.confirmLoading;(0,A.useEffect)(function(){i===void 0?v.resetFields():(i.role=m[i.role],v.setFieldsValue(o()({},i)))},[B]);var U=function(){v.submit()},W=function(p){c.ZP.error(p.errorFields[0].errors[0])};return(0,n.jsx)("div",{children:(0,n.jsx)(I.Z,{title:i?"\u66F4\u6539\u7528\u6237 ID: "+i.id:"\u65B0\u589E\u7528\u6237",visible:B,onOk:U,onCancel:K,forceRender:!0,confirmLoading:F,children:(0,n.jsxs)(u.Z,o()(o()({},j),{},{name:"basic",form:v,onFinish:T,onFinishFailed:W,initialValues:{status:!0},children:[(0,n.jsx)(u.Z.Item,{label:"\u540D\u5B57",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}],children:(0,n.jsx)(M.Z,{})}),(0,n.jsx)(u.Z.Item,{label:"\u90AE\u7BB1",name:"email",children:(0,n.jsx)(M.Z,{})}),(0,n.jsx)(u.Z.Item,{label:"\u89D2\u8272",name:"role",children:(0,n.jsxs)(f.default,{children:[(0,n.jsx)(f.default.Option,{value:m[1],children:"\u7BA1\u7406\u5458"}),(0,n.jsx)(f.default.Option,{value:m[2],children:"\u4E13\u5C5E\u7528\u6237"}),(0,n.jsx)(f.default.Option,{value:m[3],children:"\u5185\u90E8\u7528\u6237"})]})})]}))})})};h.default=P},62848:function(N,h,e){e.r(h);var b=e(15009),o=e.n(b),g=e(99289),O=e.n(g),A=e(5574),u=e.n(A),c=e(67294),I=e(86738),M=e(45360),f=e(15867),n=e(32666),j=e(61796),m=e(59042),P=e(6742),d=e(85893),E=function(){var S=(0,c.useState)(!1),v=u()(S,2),B=v[0],i=v[1],K=(0,c.useState)(!1),T=u()(K,2),F=T[0],U=T[1],W=(0,c.useState)(m.bf),L=u()(W,2),p=L[0],Z=L[1],J=(0,c.useState)([]),x=u()(J,2),z=x[0],Q=x[1],X=(0,c.useState)(!1),V=u()(X,2),$=V[0],G=V[1];(0,c.useEffect)(function(){var a=function(){var l=O()(o()().mark(function s(){var t;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,P.Lh)({page:0,pageSize:100});case 3:t=r.sent,Q(t.data.users),console.log(t),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Error fetching data:",r.t0);case 11:case"end":return r.stop()}},s,null,[[0,8]])}));return function(){return l.apply(this,arguments)}}();a()},[$]);var Y=[{title:"\u540D\u5B57",dataIndex:"name",key:"name",valueType:"text"},{title:"\u90AE\u7BB1",dataIndex:"email",key:"email"},{title:"\u89D2\u8272",dataIndex:"role",key:"role",render:function(l){return(0,d.jsx)("p",{children:j.roles[l]})}},{title:"\u64CD\u4F5C",key:"action",valueType:"option",render:function(l,s){return[(0,d.jsx)("a",{onClick:function(){k(s)},children:"\u66F4\u6539"}),(0,d.jsx)(I.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u7528\u6237\u5417\uFF1F",onConfirm:function(){w(s.id)},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,d.jsx)("a",{children:"\u5220\u9664"})})]}}],k=function(l){i(!0),Z(l)},w=function(l){var s=function(){var t=O()(o()().mark(function D(){var r;return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,P.ti)(l);case 3:r=_.sent,console.log(r),R(),_.next=11;break;case 8:_.prev=8,_.t0=_.catch(0),console.error("Error fetching data:",_.t0);case 11:case"end":return _.stop()}},D,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}();s()},q=function(){i(!1)},ee=function(){var a=O()(o()().mark(function l(s){var t,D,r,y;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log("=======",s),U(!0),t=0,p&&(t=p.id),t?D=P.Nq:D=P.cn,r=2,s.role==j.roles[3]?r=3:s.role==j.roles[1]&&(r=1),C.next=9,D({user:{id:t,name:s.name,avatar:"",email:s.email,role:r}});case 9:y=C.sent,y?(i(!1),M.ZP.success("".concat(t===0?"\u65B0\u589E":"\u66F4\u6539"," \u6210\u529F\u3002")),R(),U(!1)):(U(!1),M.ZP.error("".concat(t===0?"\u65B0\u589E":"\u66F4\u6539"," \u5931\u8D25\u3002")));case 11:case"end":return C.stop()}},l)}));return function(s){return a.apply(this,arguments)}}(),re=function(){i(!0),Z(m.bf)},R=function(){G(!$)},se=function(l,s){},ne=function(l,s){};return(0,d.jsxs)("div",{className:"list-table",children:[(0,d.jsx)(n.ZP,{columns:Y,dataSource:z,rowKey:"id",search:{},pagination:{pageSize:3,hideOnSinglePage:!0,total:z.length},options:{density:!0,fullScreen:!0,reload:function(){R()},setting:!0},headerTitle:"User List",toolBarRender:function(){return[(0,d.jsx)(f.ZP,{type:"primary",onClick:re,children:"\u65B0\u589E"}),(0,d.jsx)(f.ZP,{onClick:R,children:"\u5237\u65B0"})]}}),(0,d.jsx)(j.default,{visible:B,closeHandler:q,record:p,onFinish:ee,confirmLoading:F})]})};h.default=E}}]);
