"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[39,603,505,681],{89224:function(N,v,e){e.r(v);var d=e(9783),A=e.n(d),b=e(97857),p=e.n(b),R=e(19632),i=e.n(R),M=e(15009),m=e.n(M),O=e(99289),o=e.n(O),r=e(5574),P=e.n(r),y=e(67294),k=e(47221),c=e(69677),F=e(45360),I=e(15867),T=e(86738),C=e(65520),E=e(42075),x=e(62120),g=e(94053),L=e(11575),U=e(71949),a=e(85893),V=k.Z.Panel,B=c.Z.TextArea,K=function(S){var q=(0,y.useState)(!1),f=P()(q,2),ve=f[0],X=f[1],Ee=(0,y.useState)(!1),ee=P()(Ee,2),fe=ee[0],Y=ee[1],he=(0,y.useState)(U.initDataSourceItem),te=P()(he,2),Pe=te[0],De=te[1],je=(0,y.useState)(!1),ne=P()(je,2),re=ne[0],ae=ne[1],Ae=(0,y.useState)(void 0),se=P()(Ae,2),pe=se[0],$=se[1],ye=(0,y.useState)([]),_e=P()(ye,2),H=_e[0],G=_e[1],Ce=(0,y.useState)(void 0),ue=P()(Ce,2),Me=ue[0],J=ue[1],Oe=(0,y.useState)({}),le=P()(Oe,2),W=le[0],be=le[1],Z=S.tabKey;console.log("=====tabkey is ======",S),(0,y.useEffect)(function(){var s=function(){var t=o()(m()().mark(function n(){var u;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,g.h)({IsActive:!0,Category:Z,Offset:0,Limit:9999999});case 3:u=l.sent,G(u.data.entries||[]),console.log(u),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),console.error("Error fetching data:",l.t0);case 11:case"end":return l.stop()}},n,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}();s()},[Z,re]);var ge=function(){X(!1)},Ie=function(){var s=o()(m()().mark(function t(n){var u,h;return m()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return console.log("=======",n),Y(!0),u={name:n.name,code:n.code,codeCategory:Z,amount:parseInt(n.amount),weight:parseFloat(n.weight),note:n.note,isActive:!0},_.next=5,(0,g.px)({entry:u});case 5:h=_.sent,h?(X(!1),F.ZP.success("\u65B0\u589E\u6210\u529F\u3002"),Te()):F.ZP.error("\u65B0\u589E\u5931\u8D25\u3002"),Y(!1);case 8:case"end":return _.stop()}},t)}));return function(n){return s.apply(this,arguments)}}(),Te=function(){ae(!re)},Ue=function(t){$(function(n){return n===t?void 0:t})},Ke=function(t){J(t.key),$(t.key)},Re=function(t){var n=function(){var u=o()(m()().mark(function h(){return m()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,g.m7)(t);case 3:G(function(me){return me.filter(function(D){return D.code!==t})}),J(void 0),$(void 0),_.next=11;break;case 8:_.prev=8,_.t0=_.catch(0),console.error("Error fetching data:",_.t0);case 11:case"end":return _.stop()}},h,null,[[0,8]])}));return function(){return u.apply(this,arguments)}}();n()},Fe=function(){var s=o()(m()().mark(function t(n,u){var h,l,_;return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,n.validateFields();case 3:h=D.sent,l={name:h.name,code:h.code,codeCategory:Z,amount:parseInt(h.amount),weight:parseFloat(h.weight),note:h.note,isActive:!0},_=function(){var Ve=o()(m()().mark(function ce(){var w,z;return m()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(j.prev=0,l.name!=U.newEntryName){j.next=6;break}return j.next=4,(0,g.px)({entry:l});case 4:j.next=8;break;case 6:return j.next=8,(0,g.ld)(l);case 8:w=i()(H),z=w.findIndex(function($e){return u===$e.key}),z>-1&&(w[z]=p()(p()({},w[z]),h),G(w),J(void 0),$(void 0)),j.next=16;break;case 13:j.prev=13,j.t0=j.catch(0),console.error("Error fetching data:",j.t0);case 16:case"end":return j.stop()}},ce,null,[[0,13]])}));return function(){return Ve.apply(this,arguments)}}(),_(),D.next=12;break;case 9:D.prev=9,D.t0=D.catch(0),console.error("Validation failed:",D.t0);case 12:case"end":return D.stop()}},t,null,[[0,9]])}));return function(n,u){return s.apply(this,arguments)}}(),Le=[{title:"\u7F16\u53F7",dataIndex:"code",key:"code"},{title:"\u64CD\u4F5C",key:"actions",render:function(t){return(0,a.jsxs)("span",{children:[(0,a.jsx)(I.ZP,{type:"primary",style:{marginRight:8},onClick:function(){return Ke(t)},children:"\u66F4\u6539"}),(0,a.jsx)(T.Z,{title:"Are you sure you want to delete this row?",onConfirm:function(){return Re(t.code)},children:(0,a.jsx)(I.ZP,{danger:!0,children:"\u5220\u9664"})})]})}}],He=function(){var t=(H.length+1).toString(),n={key:t,id:0,name:U.newEntryName,code:"".concat(Z).concat(t),amount:0,weight:0,note:"\u65B0\u7684\u63CF\u8FF0"};G([n].concat(i()(H))),J(t),$(void 0)},Be=function(){X(!0),Y(!1),De(U.initDataSourceItem)},ie=function(t,n){be(function(u){return p()(p()({},u),{},A()({},t,n))})},Se=H.filter(function(s){return Object.keys(W).every(function(t){return t==="amount"?s[t]>=parseInt(W[t],10):t==="weight"?s[t]>=parseFloat(W[t]):String(s[t]).toLowerCase().includes(W[t].toLowerCase())})}),oe=function(t){return t.key===Me},We=Le.map(function(s){var t=s;return p()(p()({},t),{},{onCell:function(u){return{record:u,inputType:"text",dataIndex:t.dataIndex,title:t.title,editing:oe(u)}}})}),Ze=function(t){var n=t.record;return(0,a.jsx)("div",{children:oe(n)?(0,a.jsxs)(C.Z,{form:de,onFinish:function(){return Fe(de,n.key)},children:[(0,a.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",initialValue:n.name,children:(0,a.jsx)(c.Z,{})}),(0,a.jsx)(C.Z.Item,{label:"\u91CD\u91CF",name:"weight",initialValue:n.weight,children:(0,a.jsx)(c.Z,{})}),(0,a.jsx)(C.Z.Item,{label:"\u8BF4\u660E",name:"note",initialValue:n.note,children:(0,a.jsx)(B,{rows:4})}),(0,a.jsx)(I.ZP,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["\u540D\u79F0 : ",n.name," "]}),(0,a.jsxs)("p",{children:["\u6570\u91CF : ",n.amount]}),(0,a.jsxs)("p",{children:["\u91CD\u91CF : ",n.weight]}),(0,a.jsxs)("div",{children:["\u8BF4\u660E : ",n.note]})]})})},ke=C.Z.useForm(),xe=P()(ke,1),de=xe[0];return(0,a.jsxs)("div",{children:[(0,a.jsxs)(E.Z,{style:{marginBottom:16},children:[(0,a.jsx)(I.ZP,{type:"primary",onClick:Be,children:"\u65B0\u589E\u539F\u6599"}),(0,a.jsx)(c.Z,{placeholder:"\u7528\u539F\u6599\u540D\u79F0\u8FC7\u6EE4",onChange:function(t){return ie("name",t.target.value)},value:W.name||""}),(0,a.jsx)(c.Z,{placeholder:"\u7528\u539F\u6599\u7F16\u7801\u8FC7\u6EE4",onChange:function(t){return ie("code",t.target.value)},value:W.age||""})]}),(0,a.jsx)(x.Z,{dataSource:Se,columns:[].concat(i()(We),[{title:"\u8BE6\u60C5",key:"details",render:function(t,n){return(0,a.jsx)(k.Z,{activeKey:pe===n.key?[n.key]:[],onChange:function(){return Ue(n.key)},children:(0,a.jsx)(V,{header:"\u5C55\u5F00",children:(0,a.jsx)(Ze,{record:n})},n.key)})}}]),rowKey:"key",pagination:{pageSize:5,hideOnSinglePage:!0,total:H.length}}),(0,a.jsx)(L.default,{visible:ve,closeHandler:ge,record:Pe,tabKey:Z,onFinish:Ie,confirmLoading:fe})]})};v.default=K},11575:function(N,v,e){e.r(v);var d=e(97857),A=e.n(d),b=e(5574),p=e.n(b),R=e(67294),i=e(65520),M=e(45360),m=e(5914),O=e(69677),o=e(96330),r=e(85893),P={labelCol:{span:4},wrapperCol:{span:20}},y=function(c){var F=i.Z.useForm(),I=p()(F,1),T=I[0],C=c.visible,E=c.record,x=c.closeHandler,g=c.onFinish,L=c.confirmLoading,U=c.tabKey;(0,R.useEffect)(function(){E===void 0?T.resetFields():(E.code="".concat(U,"000"),T.setFieldsValue(A()({},E)))},[C]);var a=function(){T.submit()},V=function(K){M.ZP.error(K.errorFields[0].errors[0])};return(0,r.jsx)("div",{children:(0,r.jsx)(m.Z,{title:E?"\u66F4\u6539\u6807\u7B7E : "+E.key:"\u65B0\u589E\u6807\u7B7E",visible:C,onOk:a,onCancel:x,forceRender:!0,confirmLoading:L,children:(0,r.jsxs)(i.Z,A()(A()({},P),{},{name:"basic",form:T,onFinish:g,onFinishFailed:V,initialValues:{status:!0},children:[(0,r.jsx)(i.Z.Item,{label:"\u7F16\u7801",name:"code",initialValue:E.code,children:(0,r.jsx)(O.Z,{})}),(0,r.jsx)(i.Z.Item,{label:"\u540D\u79F0",name:"name",initialValue:E.name,children:(0,r.jsx)(O.Z,{})}),(0,r.jsx)(i.Z.Item,{label:"\u6570\u91CF",name:"amount",initialValue:E.amount,children:(0,r.jsx)(O.Z,{})}),(0,r.jsx)(i.Z.Item,{label:"\u91CD\u91CF",name:"weight",initialValue:E.weight,children:(0,r.jsx)(O.Z,{})}),(0,r.jsx)(i.Z.Item,{label:"\u8BF4\u660E",name:"note",initialValue:E.note,children:(0,r.jsx)(o.Z,{rows:4})})]}))})})};v.default=y},71949:function(N,v,e){e.r(v),e.d(v,{initDataSourceItem:function(){return b},newEntryName:function(){return A}});var d=[{key:"1",code:"A001",name:"John Doe",amount:25,weight:11.22,note:`456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park 
 Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave`},{key:"2",code:"A002",name:"John Doe",amount:30,weight:11.22,note:`456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park 
 Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave`}];v.default=d;var A="New Name",b={key:"string",code:"",name:"",amount:1,weight:1.1,note:""}},1991:function(N,v,e){e.r(v);var d=e(15009),A=e.n(d),b=e(99289),p=e.n(b),R=e(5574),i=e.n(R),M=e(67294),m=e(92398),O=e(89224),o=e(94053),r=e(85893),P=function(){var k=(0,M.useState)("A"),c=i()(k,2),F=c[0],I=c[1],T=(0,M.useState)([]),C=i()(T,2),E=C[0],x=C[1],g=(0,M.useState)(!1),L=i()(g,2),U=L[0],a=L[1];(0,M.useEffect)(function(){var B=function(){var K=p()(A()().mark(function Q(){var S;return A()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,o.sM)({IsActive:!0});case 3:S=f.sent,x(S.data.items),console.log(S),f.next=11;break;case 8:f.prev=8,f.t0=f.catch(0),console.error("Error fetching data:",f.t0);case 11:case"end":return f.stop()}},Q,null,[[0,8]])}));return function(){return K.apply(this,arguments)}}();B()},[]);var V=function(K){console.log("the active tab is ",K),I(K),a(!0)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{centered:!0,activeKey:F,onChange:V,items:E}),U&&(0,r.jsx)(O.default,{tabKey:F})]})};v.default=P},94053:function(N,v,e){e.d(v,{Es:function(){return i},_4:function(){return R},eL:function(){return p},h:function(){return A},ld:function(){return m},m7:function(){return O},px:function(){return M},sM:function(){return b}});var d=e(48931),A=function(r){return d.Z.post("/api/v1/entries/list",r)},b=function(r){return d.Z.post("/api/v1/entry/category/list",r)},p=function(r){return d.Z.post("/api/v1/entry/category",r)},R=function(r){return d.Z.put("/api/v1/entry/category",r)},i=function(r){return d.Z.delete("/api/v1/entry/category/".concat(r))},M=function(r){return d.Z.post("/api/v1/entry",r)},m=function(r){return d.Z.put("/api/v1/entry",r)},O=function(r){return d.Z.delete("/api/v1/entry/".concat(r))}}}]);
