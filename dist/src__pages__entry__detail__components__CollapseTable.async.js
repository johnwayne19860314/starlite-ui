"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[603,505,681],{89224:function(x,P,n){n.r(P);var o=n(9783),A=n.n(o),O=n(97857),y=n.n(O),T=n(19632),m=n.n(T),K=n(15009),d=n.n(K),p=n(99289),l=n.n(p),r=n(5574),D=n.n(r),j=n(67294),w=n(47221),f=n(69677),S=n(45360),g=n(15867),b=n(86738),C=n(65520),h=n(42075),V=n(62120),M=n(94053),H=n(11575),F=n(71949),a=n(85893),$=w.Z.Panel,N=f.Z.TextArea,G=function(Q){var ce=(0,j.useState)(!1),X=D()(ce,2),me=X[0],J=X[1],ve=(0,j.useState)(!1),Y=D()(ve,2),Ee=Y[0],z=Y[1],fe=(0,j.useState)(F.initDataSourceItem),q=D()(fe,2),he=q[0],Pe=q[1],De=(0,j.useState)(!1),ee=D()(De,2),ne=ee[0],te=ee[1],je=(0,j.useState)(void 0),re=D()(je,2),ye=re[0],R=re[1],Ae=(0,j.useState)([]),ae=D()(Ae,2),L=ae[0],k=ae[1],pe=(0,j.useState)(void 0),se=D()(pe,2),Ce=se[0],Z=se[1],Oe=(0,j.useState)({}),ue=D()(Oe,2),I=ue[0],Me=ue[1],U=Q.tabKey;console.log("=====tabkey is ======",Q),(0,j.useEffect)(function(){var s=function(){var e=l()(d()().mark(function t(){var i;return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,M.h)({IsActive:!0,Category:U,Offset:0,Limit:9999999});case 3:i=_.sent,k(i.data.entries||[]),console.log(i),_.next=11;break;case 8:_.prev=8,_.t0=_.catch(0),console.error("Error fetching data:",_.t0);case 11:case"end":return _.stop()}},t,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}();s()},[U,ne]);var ge=function(){J(!1)},be=function(){var s=l()(d()().mark(function e(t){var i,c;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("=======",t),z(!0),i={name:t.name,code:t.code,codeCategory:U,amount:parseInt(t.amount),weight:parseFloat(t.weight),note:t.note,isActive:!0},u.next=5,(0,M.px)({entry:i});case 5:c=u.sent,c?(J(!1),S.ZP.success("\u65B0\u589E\u6210\u529F\u3002"),Fe()):S.ZP.error("\u65B0\u589E\u5931\u8D25\u3002"),z(!1);case 8:case"end":return u.stop()}},e)}));return function(t){return s.apply(this,arguments)}}(),Fe=function(){te(!ne)},Ie=function(e){R(function(t){return t===e?void 0:e})},Ue=function(e){Z(e.key),R(e.key)},Te=function(e){var t=function(){var i=l()(d()().mark(function c(){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,M.m7)(e);case 3:k(function(oe){return oe.filter(function(v){return v.code!==e})}),Z(void 0),R(void 0),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(0),console.error("Error fetching data:",u.t0);case 11:case"end":return u.stop()}},c,null,[[0,8]])}));return function(){return i.apply(this,arguments)}}();t()},Ke=function(){var s=l()(d()().mark(function e(t,i){var c,_,u;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,t.validateFields();case 3:c=v.sent,_={name:c.name,code:c.code,codeCategory:U,amount:parseInt(c.amount),weight:parseFloat(c.weight),note:c.note,isActive:!0},u=function(){var xe=l()(d()().mark(function de(){var B,W;return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(E.prev=0,_.name!=F.newEntryName){E.next=6;break}return E.next=4,(0,M.px)({entry:_});case 4:E.next=8;break;case 6:return E.next=8,(0,M.ld)(_);case 8:B=m()(L),W=B.findIndex(function(we){return i===we.key}),W>-1&&(B[W]=y()(y()({},B[W]),c),k(B),Z(void 0),R(void 0)),E.next=16;break;case 13:E.prev=13,E.t0=E.catch(0),console.error("Error fetching data:",E.t0);case 16:case"end":return E.stop()}},de,null,[[0,13]])}));return function(){return xe.apply(this,arguments)}}(),u(),v.next=12;break;case 9:v.prev=9,v.t0=v.catch(0),console.error("Validation failed:",v.t0);case 12:case"end":return v.stop()}},e,null,[[0,9]])}));return function(t,i){return s.apply(this,arguments)}}(),Re=[{title:"\u7F16\u53F7",dataIndex:"code",key:"code"},{title:"\u64CD\u4F5C",key:"actions",render:function(e){return(0,a.jsxs)("span",{children:[(0,a.jsx)(g.ZP,{type:"primary",style:{marginRight:8},onClick:function(){return Ue(e)},children:"\u66F4\u6539"}),(0,a.jsx)(b.Z,{title:"Are you sure you want to delete this row?",onConfirm:function(){return Te(e.code)},children:(0,a.jsx)(g.ZP,{danger:!0,children:"\u5220\u9664"})})]})}}],He=function(){var e=(L.length+1).toString(),t={key:e,id:0,name:F.newEntryName,code:"".concat(U).concat(e),amount:0,weight:0,note:"\u65B0\u7684\u63CF\u8FF0"};k([t].concat(m()(L))),Z(e),R(void 0)},Le=function(){J(!0),z(!1),Pe(F.initDataSourceItem)},ie=function(e,t){Me(function(i){return y()(y()({},i),{},A()({},e,t))})},Be=L.filter(function(s){return Object.keys(I).every(function(e){return e==="amount"?s[e]>=parseInt(I[e],10):e==="weight"?s[e]>=parseFloat(I[e]):String(s[e]).toLowerCase().includes(I[e].toLowerCase())})}),_e=function(e){return e.key===Ce},Se=Re.map(function(s){var e=s;return y()(y()({},e),{},{onCell:function(i){return{record:i,inputType:"text",dataIndex:e.dataIndex,title:e.title,editing:_e(i)}}})}),ke=function(e){var t=e.record;return(0,a.jsx)("div",{children:_e(t)?(0,a.jsxs)(C.Z,{form:le,onFinish:function(){return Ke(le,t.key)},children:[(0,a.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",initialValue:t.name,children:(0,a.jsx)(f.Z,{})}),(0,a.jsx)(C.Z.Item,{label:"\u91CD\u91CF",name:"weight",initialValue:t.weight,children:(0,a.jsx)(f.Z,{})}),(0,a.jsx)(C.Z.Item,{label:"\u8BF4\u660E",name:"note",initialValue:t.note,children:(0,a.jsx)(N,{rows:4})}),(0,a.jsx)(g.ZP,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["\u540D\u79F0 : ",t.name," "]}),(0,a.jsxs)("p",{children:["\u6570\u91CF : ",t.amount]}),(0,a.jsxs)("p",{children:["\u91CD\u91CF : ",t.weight]}),(0,a.jsxs)("div",{children:["\u8BF4\u660E : ",t.note]})]})})},Ze=C.Z.useForm(),We=D()(Ze,1),le=We[0];return(0,a.jsxs)("div",{children:[(0,a.jsxs)(h.Z,{style:{marginBottom:16},children:[(0,a.jsx)(g.ZP,{type:"primary",onClick:Le,children:"\u65B0\u589E\u539F\u6599"}),(0,a.jsx)(f.Z,{placeholder:"\u7528\u539F\u6599\u540D\u79F0\u8FC7\u6EE4",onChange:function(e){return ie("name",e.target.value)},value:I.name||""}),(0,a.jsx)(f.Z,{placeholder:"\u7528\u539F\u6599\u7F16\u7801\u8FC7\u6EE4",onChange:function(e){return ie("code",e.target.value)},value:I.age||""})]}),(0,a.jsx)(V.Z,{dataSource:Be,columns:[].concat(m()(Se),[{title:"\u8BE6\u60C5",key:"details",render:function(e,t){return(0,a.jsx)(w.Z,{activeKey:ye===t.key?[t.key]:[],onChange:function(){return Ie(t.key)},children:(0,a.jsx)($,{header:"\u5C55\u5F00",children:(0,a.jsx)(ke,{record:t})},t.key)})}}]),rowKey:"key",pagination:{pageSize:5,hideOnSinglePage:!0,total:L.length}}),(0,a.jsx)(H.default,{visible:me,closeHandler:ge,record:he,tabKey:U,onFinish:be,confirmLoading:Ee})]})};P.default=G},11575:function(x,P,n){n.r(P);var o=n(97857),A=n.n(o),O=n(5574),y=n.n(O),T=n(67294),m=n(65520),K=n(45360),d=n(5914),p=n(69677),l=n(96330),r=n(85893),D={labelCol:{span:4},wrapperCol:{span:20}},j=function(f){var S=m.Z.useForm(),g=y()(S,1),b=g[0],C=f.visible,h=f.record,V=f.closeHandler,M=f.onFinish,H=f.confirmLoading,F=f.tabKey;(0,T.useEffect)(function(){h===void 0?b.resetFields():(h.code="".concat(F,"000"),b.setFieldsValue(A()({},h)))},[C]);var a=function(){b.submit()},$=function(G){K.ZP.error(G.errorFields[0].errors[0])};return(0,r.jsx)("div",{children:(0,r.jsx)(d.Z,{title:h?"\u66F4\u6539\u6807\u7B7E : "+h.key:"\u65B0\u589E\u6807\u7B7E",visible:C,onOk:a,onCancel:V,forceRender:!0,confirmLoading:H,children:(0,r.jsxs)(m.Z,A()(A()({},D),{},{name:"basic",form:b,onFinish:M,onFinishFailed:$,initialValues:{status:!0},children:[(0,r.jsx)(m.Z.Item,{label:"\u7F16\u7801",name:"code",initialValue:h.code,children:(0,r.jsx)(p.Z,{})}),(0,r.jsx)(m.Z.Item,{label:"\u540D\u79F0",name:"name",initialValue:h.name,children:(0,r.jsx)(p.Z,{})}),(0,r.jsx)(m.Z.Item,{label:"\u6570\u91CF",name:"amount",initialValue:h.amount,children:(0,r.jsx)(p.Z,{})}),(0,r.jsx)(m.Z.Item,{label:"\u91CD\u91CF",name:"weight",initialValue:h.weight,children:(0,r.jsx)(p.Z,{})}),(0,r.jsx)(m.Z.Item,{label:"\u8BF4\u660E",name:"note",initialValue:h.note,children:(0,r.jsx)(l.Z,{rows:4})})]}))})})};P.default=j},71949:function(x,P,n){n.r(P),n.d(P,{initDataSourceItem:function(){return O},newEntryName:function(){return A}});var o=[{key:"1",code:"A001",name:"John Doe",amount:25,weight:11.22,note:`456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park 
 Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave`},{key:"2",code:"A002",name:"John Doe",amount:30,weight:11.22,note:`456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park 
 Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave 456 Park Ave`}];P.default=o;var A="New Name",O={key:"string",code:"",name:"",amount:1,weight:1.1,note:""}},94053:function(x,P,n){n.d(P,{Es:function(){return m},_4:function(){return T},eL:function(){return y},h:function(){return A},ld:function(){return d},m7:function(){return p},px:function(){return K},sM:function(){return O}});var o=n(48931),A=function(r){return o.Z.post("/api/v1/entries/list",r)},O=function(r){return o.Z.post("/api/v1/entry/category/list",r)},y=function(r){return o.Z.post("/api/v1/entry/category",r)},T=function(r){return o.Z.put("/api/v1/entry/category",r)},m=function(r){return o.Z.delete("/api/v1/entry/category/".concat(r))},K=function(r){return o.Z.post("/api/v1/entry",r)},d=function(r){return o.Z.put("/api/v1/entry",r)},p=function(r){return o.Z.delete("/api/v1/entry/".concat(r))}}}]);
